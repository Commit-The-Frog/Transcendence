<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PING PONG</title>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      body {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      canvas {
        background: #eee;
        display: block;
        margin: 0 auto;
        border: 1px solid black;
      }
      h1, h2 {
        margin-bottom: 10px;
      }
      .input-container {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      label {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <h2 id="msg">Please insert player nickname</h2>
    <button id="btn">start</button>

    <script>
		const body = document.body; // body 요소 선택
		const h2 = document.getElementById('msg');
		const button = document.getElementById('btn'); // 버튼 요소 선택
		const params = new URLSearchParams(window.location.search);
		const type = params.get('type');
		const mode = params.get('item_mode');
		const loc = params.get('location');
		const gameType = document.createElement('h1');
		let n;

		if (loc == 'local' && type == 1) {
			n = 2;
			gameType.textContent = '1 vs 1';
		}
		else if (loc == 'local' && type == 2) {
			n = 4;
			gameType.textContent = 'tournament';
		} else if (loc == 'remote' && type == 1) {
			n = 1;
			gameType.textContent = '1 vs 1';
		} else {
			n = 1;
			gameType.textContent = 'tournament';
		}

		body.insertBefore(gameType, h2);
		for (let i = 1; i <= n; i++) {
			// 새 div 요소 생성
			const div = document.createElement('div');
			div.className = 'input-container';

			// label 요소 생성
			const label = document.createElement('label');
			label.setAttribute('for', `player${i}`);
			label.textContent = `Player ${i}:`;

			// input 요소 생성
			const input = document.createElement('input');
			input.id = `player${i}`;
			input.type = 'text';

			// div에 label과 input 추가
			div.appendChild(label);
			div.appendChild(input);

			// body에 div 추가 (버튼 앞에 추가)
			body.insertBefore(div, button);
		}
	  
		button.addEventListener('click', () => {
			let url = `${loc}.html?location=${loc}&type=${type}&item_mode=${mode}`;

			for (let i = 1; i <= n; i++) {
				const playerName = document.getElementById(`player${i}`).value;
				url += `&player${i}=${playerName}`;
			}
			window.location.href = url;
		})
    </script>
  </body>
</html>
